# 1.简单介绍一下这个项目？
这个项目主要目的是对浏览器的连接请求进行解析处理，处理完之后给浏览器客户端返回一个响应，如网页、图片、视频等。服务器后端的处理方式使用socket通信，利用多路IO复用，可以同时处理多个请求，请求的解析使用预先准备好的线程池，可以选择使用reactor或者模拟proactor模式来进行处理，模拟proactor模式是主线程负责监听，监听到有事件后，从socket中循环读取数据，然后将读取到的数据封装成一个请求对象插入请求队列，插入请求队列后会利用信号量通知等待线程；睡眠在请求队列上的工作线程被唤醒进行处理请求；对于HTTP请求的处理，采用状态机来解析HTTP请求。
对文件请求的处理：客户端发送请求连接，到达服务器，服务器端先用read_once()函数一次性把所有请求读到缓冲区。然后process_read函数分别调用三个函数（解析请求行、请求头、请求体）对缓冲区的内容进行解析。主状态机主要用于解析客户端请求，从状态机用于解析一行内容并把每一行结束标志符(\r\n)替换为\0\0(\0表示的是一个字符串的结束符)，这样格式化方便主状态机解析，主状态机调用解析请求行、请求头、请求体三部分函数进行解析。解析结束后利用do_request()函数生成响应报文，该函数会根据不同的网址url产生不同的响应体。最后通过write函数里套接字的传输方式把响应体传给客户端。
日志分为同步日志和异步日志，异步日志利用阻塞队列，先将日志放入阻塞队列中，然后利用条件变量通知给阻塞的线程将日志添加到对应的文件中，日志系统采用单例懒汉模式，利用C++11的特性，C++11以后,使用静态局部变量懒汉模式不用加锁就是线程安全的。原因在于，首先，静态局部变量通过静态方法获得，且只有当该静态方法第一次执行的时候才会初始化，且后续再次调用该方法也不会再次初始化，这是静态局部变量的特性。而在c++11以上标准中，静态局部变量初始化是线程安全的。当其中一个线程初始化instance的时候，会阻塞其它线程的初始化行为。
在write_log()函数中，这里面有两部分，一部分是对新的文件名、时间、日志名进行再次处理，一部分是时间+新加入的日志参数放入缓冲区。异步加入阻塞队列，同步直接写入日志文件。阻塞队列是用数组模拟的生产者消费者模式。根据初始化函数传入的最后一个参数阻塞队列最大容纳值判断是同步还是异步，异步为大于等于1。
同时使用单例模式创建数据库连接池，数据库连接池中，提前创建一定量的数据库连接，把他们保存在双向链表中。
采用定时器处理非活动连接，定时器容器利用升序链表进行设计。